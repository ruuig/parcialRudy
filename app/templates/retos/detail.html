<!-- app/templates/retos/detail.html -->
{% extends 'layout.html' %}
{% block title %}{{ reto.titulo }}{% endblock %}

{% block content %}
<div class="container">
  <div class="detail-container">
    
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
      <a href="{{ url_for('retos.index') }}" class="breadcrumb-link">
        <i class="fas fa-home"></i>
        Retos
      </a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-current">{{ reto.titulo[:30] }}...</span>
    </nav>

    <!-- Header principal -->
    <div class="detail-header">
      <div class="header-main">
        <h1>{{ reto.titulo }}</h1>
        
        <div class="badges-container">
          <span class="badge badge-category">
            {% if reto.categoria == 'nlp' %}üó£Ô∏è{% elif reto.categoria == 'vision' %}üëÅÔ∏è{% elif reto.categoria == 'ml' %}ü§ñ{% else %}‚ö°{% endif %}
            {{ reto.categoria|capitalize }}
          </span>
          <span class="badge badge-difficulty">
            {% if reto.dificultad == 'facil' %}üü¢{% elif reto.dificultad == 'medio' %}üü°{% else %}üî¥{% endif %}
            {{ reto.dificultad|capitalize }}
          </span>
          {% if reto.estado == 'completado' %}
            <span class="badge badge-completed">‚úÖ Completado</span>
          {% elif reto.estado == 'en_proceso' %}
            <span class="badge badge-progress">‚è≥ En proceso</span>
          {% else %}
            <span class="badge badge-pending">‚≠ï Pendiente</span>
          {% endif %}
        </div>
      </div>
      
      <div class="header-actions">
        <a href="{{ url_for('retos.edit', reto_id=reto.id) }}" class="btn btn-outline">
          <i class="fas fa-edit"></i>
          Editar
        </a>
        <form class="inline-form" method="post" action="{{ url_for('retos.delete', reto_id=reto.id) }}" 
              onsubmit="return confirm('¬øEst√°s seguro de eliminar este reto?');">
          <button class="btn btn-danger">
            <i class="fas fa-trash"></i>
            Eliminar
          </button>
        </form>
      </div>
    </div>

    <!-- Descripci√≥n -->
    <div class="description-card">
      <h3>
        <i class="fas fa-file-text"></i>
        Descripci√≥n del reto
      </h3>
      <p>{{ reto.descripcion }}</p>
    </div>

    <!-- Panel de acciones -->
    <div class="action-panels">
      
      <!-- Panel de estado -->
      <div class="panel">
        <div class="panel-header">
          <h3>
            <i class="fas fa-sync-alt"></i>
            Actualizar estado
          </h3>
        </div>
        <div class="panel-body">
          <form method="post" action="{{ url_for('retos.update_status', reto_id=reto.id) }}">
            <div class="form-group">
              <label class="form-label">Estado actual</label>
              <select name="estado" class="form-select">
                {% for e in ['pendiente','en_proceso','completado'] %}
                  <option value="{{ e }}" {% if reto.estado==e %}selected{% endif %}>
                    {% if e == 'completado' %}‚úÖ Completado
                    {% elif e == 'en_proceso' %}‚è≥ En proceso
                    {% else %}‚≠ï Pendiente{% endif %}
                  </option>
                {% endfor %}
              </select>
            </div>
            <button class="btn btn-primary full-width">
              <i class="fas fa-sync-alt"></i>
              Actualizar estado
            </button>
          </form>
        </div>
      </div>

      <!-- Panel de informaci√≥n -->
      <div class="panel">
        <div class="panel-header">
          <h3>
            <i class="fas fa-info-circle"></i>
            Detalles del reto
          </h3>
        </div>
        <div class="panel-body">
          <div class="info-grid">
            <div class="info-item">
              <i class="fas fa-tag"></i>
              <div>
                <span class="info-label">Categor√≠a</span>
                <span class="info-value">{{ reto.categoria|capitalize }}</span>
              </div>
            </div>
            <div class="info-item">
              <i class="fas fa-tachometer-alt"></i>
              <div>
                <span class="info-label">Dificultad</span>
                <span class="info-value">{{ reto.dificultad|capitalize }}</span>
              </div>
            </div>
          </div>

          <div class="suggestions">
            <h4>
              <i class="fas fa-lightbulb"></i>
              Sugerencias
            </h4>
            <ul>
              <li>Documenta tu progreso regularmente</li>
              <li>Busca recursos y ejemplos similares</li>
              <li>No dudes en pedir ayuda en la comunidad</li>
            </ul>
          </div>
        </div>
      </div>

    </div>

  </div>
</div>
{% endblock %}